# Agent Kai: Deep Fundamental Analysis

> Comprehensive auditing and visualization of corporate fundamentals.
> Updated: January 2026.

---

## ðŸŽ¯ Overview

Agent Kai transforms from a basic data fetcher into a **Senior Quant Analyst**. It performs deep-dive audits on companies using SEC filings, market data, and qualitative analysis, presenting findings in a "Premium Institutional Terminal" interface.

## ðŸ“Š Key Features

### 1. Deep Fundamental Report

A structured, multi-section analysis generated by the Gemini 2.0 Flash backend:

- **Business Moat & Competitive Depth**: Analysis of sustainable competitive advantages.
- **Financial Resilience**: Stress-testing balance sheets against market volatility.
- **Capital Allocation**: Evaluating management's efficiency in deploying capital (ROIC, R&D).
- **Institutional Bull/Bear Cases**: Balanced, high-level arguments for and against the stock.

### 2. Advanced Visualizations

Interactive, multi-series charts powered by `recharts`:

- **Performance Trend**: Revenue vs. Operating Cash Flow (OCF) over time.
- **Growth & Innovation**: Revenue vs. R&D Spend to measure innovation efficiency.
- **Earnings Quality**: Net Income vs. OCF divergence check (Red flag detection).

### 3. Institutional Terminal UI

A premium, data-dense interface built with **Morphy-UX**:

- **Glassmorphism & Neomorphism**: Modern, depth-based UI elements.
- **GSAP Animations**: Smooth, cinematic entry animations for data cards.
- **Interactive Command Center**: Quick-scan interface for rapid ticker analysis.

---

## ðŸ—ï¸ Architecture

### Backend (`hushh_mcp/agents/kai`)

- **`FundamentalAgent`**: Orchestrates data fetching.
  - Fetches **Extended SEC Metrics**: OCF, Capex, Long-Term Debt, Equity, R&D.
  - Calculates **Deep Quant Metrics**: FCF Margin, Debt-to-Equity, Earnings Quality Ratio.
- **`DecisionGenerator`**: Synthesizes structured `DecisionCard`.
  - Promotes `quant_metrics` to top-level for frontend access.
  - Merges Gemini qualitative insights with deterministic financial data.

### Frontend (`app/dashboard/kai/analysis`)

- **`page.tsx`**: Main controller.
  - Manages `loading` states with `Loader2` spinner.
  - Restores and renders all 3 key charts.
  - Displays un-clamped Bull/Bear cases for full readability.
- **Data Flow**:
  1.  User inputs ticker.
  2.  `action.analyze_stock` calls backend.
  3.  Backend returns `DecisionCard`.
  4.  Frontend hydrates `recharts` and text cards using GSAP.

---

## ðŸš€ Usage

### Running Analysis

1.  Navigate to `/dashboard/kai/analysis`.
2.  Enter a ticker (e.g., "AAPL", "NVDA").
3.  Click "ANALYZE" (or "Quick Scan").
4.  View the generated **Deep Fundamental Report**.

### Key Metrics Explained

- **Earnings Quality Ratio**: `OCF / Net Income`. >1.0 indicates high quality earnings backed by cash. <1.0 suggests accounting maneuvering.
- **Innovation Efficiency**: Revenue growth relative to R&D spend.

---

## ðŸ”’ Deployment

The Kai agent is deployed as part of the `consent-protocol` service on Cloud Run.

- **Backend URL**: `https://consent-protocol-1006304528804.us-central1.run.app`
- **Data Sources**: SEC EDGAR (primary), yfinance (market data - fallback).
